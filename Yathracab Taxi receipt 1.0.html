<!DOCTYPE html>
<html>
<head>

    <style>
        /* Styles from Code 1... */

        .hidden {
            display: none;
        }
    </style>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" type="image/png" href=".png">
   

    <style>


        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 0;
            text-align: center;
        }



        .receipt {
            width: 100%;
            max-width: 600px;
            padding-bottom: 20px;
            margin: 0 auto;
            background-color: #fff;
            border: 2px solid #67d7f2;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

            box-sizing: border-box;
            page-break-inside: avoid;
        }
           .receipthead {
            width: 100%;
            max-width: 700px;
}
        .logo-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo {
            max-width: 100%;
        }

        .invoice-fields {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0px;
        }

        .invoice-fields p {
            margin: 0;
            font-size: 18px;
            color: #777;
            width: 120PX;
        }
        .receipt {
            width: 100%;
            max-width: 700px;
        }


        table {
            width: 100%;
            max-width: 800px;

            border-collapse: collapse;
            font-size: 14px;
        }

        caption {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: left;
            letter-spacing: 2px;
            border-bottom: 1px solid #ccc;
            /* Add this line to add a border below the caption */
        }

        th {
            padding: 5px 10px;
            text-align: left;
            border-bottom: .5px solid #ccc;
            background-color: #677f29;
            color: #fff;
            text-transform: uppercase;
        }

        td {
            padding: 5px;
            text-align: right;
            border-bottom: 1px solid #ccc;

        }




        input[type=text],
        input[type=number],
        input[type=datetime-local],
        input[type=date],
        select,
        textarea,
        input[type=tel],
        input[type=email],
        input[type=password] {
            border: none;
            outline: .5px solid #ccc;
            border-bottom: 0px solid #ccc;
            font-size: 20px;
;
            padding: 5px;
            resize: vertical;
            border-radius: 0px;
            background-color: #f7f7f7;
            text-transform: uppercase;
            padding-left: 20px;
            height: 40px;
            
            margin-bottom: 5px; /* Add some margin between input fields */
    width: calc(100% - 30px); /* Adjust the width to fit within the container */
  
            
            
            
        }
        input[type=button] {

            margin: 10px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;

        }




    .thank-you {
        font-size: 18px;
        font-weight: bold;
        margin-top: 10px;
        color: #333;
        float: left;
        margin-right: 30px;
    }

    .note {
        font-size: 14px;
        margin-top: 5px;
        color: #777;
    }


    .authorized-signatory {
        font-size: 16px;
        margin-right: 10px;
        /* Add a margin to create space between the "Thank you" message and the signatory */
        color: #777;
        float: right;
        /* Align the signatory to the right side */
    }

    .address {
        font-size: 12px;
        margin-top: 3px;
        color: #777;
        text-align: center;
        letter-spacing: 4px;
        border-bottom: none;
        /* Remove the bottom border */
        margin-bottom: -10px;
        /* Remove the bottom margin */
    }




    /*------ login style------*/
    form#loginForm body {
        font-family: Arial, sans-serif;
        background-color: #f2f2f2;
        margin: 0;
        padding: 0;
        text-align: center;
    }


    h1 {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 7px;
        color: #333;
    }
    .logo {
        max-width: 100%;
        height: auto;
        margin-bottom: 20px;
        margin-top: 5px;
    }
    .login-container {
        width: 100%;
        max-width: 400px;
        padding: 20px;
        margin: 0 auto;
        background-color: #fff;
        border: 2px solid #67d7f2;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        box-sizing: border-box;
        margin-top: 10px;
    }

    .input-container {
        position: relative;
        margin-top: 10px;
        margin-bottom: 20px;
    }



    .label-inside {
        position: absolute;
        left: 20px;
        bottom: 50%;
        transform: translateY(50%);
        font-size: 14px;
        color: grey;
        pointer-events: none;

    }



    .label-inside.hidden {
        display: none;
    }




    form#loginForm button[type=button] {
        width: 100%;
        background-color: #3498db;
        color: white;
        padding: 15px 30px;
        font-size: 15px;
        border: 2px solid #3498db;
        border-radius: .5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-bottom: 20px;
        

        
    }

    h4 {
        color: grey;
        font-size: 14px;
        text-align: center;
    }
    .register-button {
        width: 100%;
        background-color: #3498db;
        color: white;
        padding: 15px 30px;
        font-size: 15px;
        border: 2px solid #3498db;
        border-radius: .5px;
        cursor: pointer;
        transition: background-color 0.3s ease;

    }

    .register-button:hover {
        background-color: #2980b9;
    }
    /*------_---------------------------------*/

#registration-form {
    background-color: #f2f2f2;
    padding: 20px;
    max-width: 500px; /* Adjust the width as needed */
    margin: 0 auto; /* Center the form horizontally */
 
    border: 2px solid skyblue; /* Add this line to set the border color */
    padding: 20px; /* Optional: Add padding for better appearance */
    border-radius: 5px; /* Optional: Add border-radius for rounded corners */


    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

#registration-form h2 {
    color: #333;
}

#registration-form label {
    display: block;
    margin-bottom: 8px;
    color: black ;
}

#registration-form input,
#registration-form select {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

#registration-form input[type="submit"] {
    background-color: #3498db;
    color: white;
    padding: 15px 30px;
    font-size: 15px;
    border: 2px solid #3498db;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 10px;
}

#registration-form input[type="submit"]:hover {
    background-color: #2980b9;
}

#registration-form caption {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
    text-align: left;
    letter-spacing: 2px;
    border-bottom: 1px solid #ccc;
   
    
}
#registration-form th {
    background-color: skyblue;

            padding: 10px;
            text-align: left;
            border-bottom: 2px solid #ccc;

                     text-transform: uppercase;
        }


</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.15/jspdf.plugin.autotable.min.js"></script>
<script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script src="script.js"></script>


</head>
<body>

<form id="loginForm">
<div class="login-container">


<h1>Welcome back !</h1>
<h4>Yathracab Drivers Login Page</h>

<div class="input-container">
<input type="text" id="username" name="username" required>
<label class="label-inside" for="username">Driver name</label>
</div>

<div class="input-container">
<input type="password" id="password" name="password" required>
<label class="label-inside" for="password">Password</label>
</div>




<button type="button" onclick="login()">Login</button>

<div class="Register">
<span class="Register">
Donâ€™t have Yathracab account?

<!-- Then use the class in your button -->
<button onclick="showRegistrationForm()" class="register-button">Register Now</button>
</span>
<!-- Your existing login form content here -->

</div>

</form>


</div>



<div id="registration-form" class="hidden">
    <h2>Yathracab Registration form</h2>
    <form name='submit-to-google-sheet'>
        <table>
            <tr>
                <th><label for="name">Name:</label></th>
                <td><input type="text" id="name" name="name" required></td>
            </tr>
            <tr>
                <th><label for="age">Age:</label></th>
                <td><input type="number" id="age" name="age" required></td>
            </tr>
            <tr>
                <th><label for="yathracab-id">Yathracab ID:</label></th>
                <td><input type="number" id="yathracab-id" name="yathracab_id" required></td>
            </tr>
            <tr>
                <th><label for="mobile-1">Mobile 1:</label></th>
                <td><input type="tel" id="mobile-1" name="mobile_1" required></td>
            </tr>
            <tr>
                <th><label for="mobile-2">Mobile 2:</label></th>
                <td><input type="tel" id="mobile-2" name="mobile_2" required></td>
            </tr>
            <tr>
                <th><label for="email">Email:</label></th>
                <td><input type="email" id="email" name="email" required></td>
            </tr>
            <tr>
                <th><label for="place">Place:</label></th>
                <td><input type="text" id="place" name="place" required></td>
            </tr>
            <tr>
                <th><label for="vehicle-number">Vehicle Number:</label></th>
                <td><input type="text" id="vehicle-number" name="vehicle_number" required></td>
            </tr>
            <tr>
                <th><label for="vehicle-model">Vehicle Model:</label></th>
                <td><input type="text" id="vehicle-model" name="vehicle_model" required></td>
            </tr>
            <tr>
                <th><label for="vehicle-type">Vehicle Type:</label></th>
                <td>
                    <select id="vehicle-type" name="vehicle_type" size="3">
                        <option value="Hatchback">Hatchback</option>
                        <option value="Sedan">Sedan</option>
                        <option value="XUV">XUV</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th><label for="driving">Driving:</label></th>
                <td>
                    <select id="driving" name="driving" size="3" id="driving">
                        <option value="Own Vehicle">Own Vehicle</option>
                        <option value="Rent">Rent</option>
                        <option value="Commission">Commission</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th><label for="driving-license-image">Driving License Image:</label></th>
                <td><input type="file" id="driving-license-image" name="driving_license_image" accept="image/*" required></td>
            </tr>
        </table>
        <input type="submit" value="Submit">
        
            </form>
        

        
        

</div>




<form id="detailsForm" class="hidden" name='submit-to-google-sheet2'>




<div class="receipt">

<h2>TAXI RECEIPT </h2>
<div class="receipthead">


<table>

<tr>
<th>DRIVER ID</th>
<th>Receipt Number</th>
<th>Receipt Date</th>



</tr>
<tr>
<td>


<input id="driverId" type="text" id="driverId" name="driverId" readonly></td>




<td><input type="text"="width :70px;" id="receiptNumber" name="receiptNumber"></td>
<td>

<input type="date" id="selectedDate" name="invoiceDate" onchange="updateFormDate(this.value)">





</tr>
</table>
</div>
<table>
<tr>
<th scope="row">CUSTOMER NAME</th>
<td><input type="text" name="CustomerName" value=""></td>
</tr>
<tr>
<th scope="row">CUSTOMER CONTACT NO.</th>
<td><input type="number" name="CustomerNumber" value=""></td>
</tr>


<tr>
<th scope="row">DRIVER NAME</th>
<td>
<input type="text" id="driverName" name="driverName" readonly></td>

</tr>
<tr>
<th scope="row">DRIVER CONTACT NO.</th>
<td>

<input type="text" id="driverNumber" name="driverNumber" readonly></td>



</tr>

<tr>
<th scope="row">pickup date</th>
<td><input type="datetime-local" id="pickupDate" name="pickupDate" value=""></td>
</tr>

<tr>
<th scope="row">pickup location</th>
<td><input type="text" id="pickupLocation" name="pickupLocation" value=""></td>
</tr>
<tr>
<th scope="row">destination</th>
<td><input type="text" id="destination" name="destination" value=""></td>
</tr>

<tr>
<th scope="row">DISTANCE/TIME</th>
<td><input type="text" name="Distance" value=""></td>
</tr>
<tr>
<th scope="row">VEHICLE Number</th>
<td><input type="text" name="vehicle Number" id="vehicleNumber" value="" readonly></td>
</tr>

<tr>
<th scope="row">VEHICLE TYPE</th>
<td>
<select id="VehicleType" name="VehicleType" size="3">
<option value="Hatchback">Hatchback</option>
<option value="Sedan">Sedan</option>
<option value="XUV">XUV</option>
</select>
</td>
</tr>




</select>
</td>
</tr>
<tr>
<th scope="row"> Trip Charge </th></th>
<td><input type="text" name="Amount" value="&#8377;"></td>
</tr>
</tbody>
</div>
</table>




<!-- Existing code -->

<p class="thank-you">
Thank you for choosing Yathracab !<span class="authorized-signatory">Authorized Signatory</span>
</p><br>
<p class="note">
Please retain this receipt for your records.
</p>
<p class="address">
www.yathracab.com  email: yathracabindia@gmail.com
</p>

</div>



</div>


<input type="button" id="downloadButton" value="Download PDF & Submit" onclick="generatePDF(); submitForm();">
</form>

</div>


<script>


function login() {
var username = document.getElementById('username').value.toLowerCase();
var password = document.getElementById('password').value;


// Assuming driverList is the array of drivers you provided
var driver = driverList.find(d => d.name.toLowerCase() === username && d.id === password);


if (driver) {
// Hide login form
document.getElementById('loginForm').style.display = 'none';

// Display details form
document.getElementById('detailsForm').style.display = 'block';

// Populate driver details
document.getElementById('driverName').value = driver.name;
document.getElementById('driverNumber').value = driver.number;
// Select the driver ID in the dropdown
document.getElementById('driverId').value = driver.id;
document.getElementById('vehicleNumber').value = driver.vnumber;
document.getElementById('VehicleType').value = driver.vtype;


// Display receipt
document.querySelector('.receipt').style.display = 'block';
} else {
alert('Invalid credentials. Please try again.');
}
}



// Driver list with names and numbers

var driverList = [{
id: "0011",
name: "Rishali",
number: "9995386099",
vnumber: "KL14 Q 6404",
vtype: "Hatchback"
},

{
id: "241",
name: "akram",
number: "7012584091",
vnumber: "KL 14 AC 5148",
vtype: "Hatchback"
}];
// Rest of your JavaScript ce for generating PDF
async function generatePDF() {
console.log('Generating PDF...');

// Define an array of required field names
const requiredFields = [
'CustomerName',
'CustomerNumber',
'driverName',
'driverNumber',
'pickupDate',
'pickupLocation',
'Distance',
'VehicleType',
'vehicleNumber',
'receiptNumber'

];

// Iterate through required fields
for (const fieldName of requiredFields) {
// Get the input field
const fieldInput = document.querySelector(`[name="${fieldName}"]`);

// Check if the input field exists and is not null
if (fieldInput && fieldInput.value.trim() === '') {
alert(`Please fill in all required fields before generating the PDF.`);
return; // Stop further execution
}
}

// Log a message when PDF generation is about to start
console.log('Starting PDF generation...');

// Proceed with PDF generation
const receipt = document.querySelector('.receipt');
const options = {
margin: [10,
10,
10,
10],
filename: 'receipt.pdf',
image: {
type: 'jpeg',
quality: 0.98
},
html2canvas: {
scale: 2
},
jsPDF: {
unit: 'mm',
format: 'a4',
orientation: 'portrait'
}
};

// Log a message when starting HTML to PDF conversion
console.log('Converting HTML to PDF...');

try {
await html2pdf().from(receipt).set(options).save();
// Log a message when PDF is successfully generated
console.log('PDF generated successfully.');
} catch (error) {
// Log an error message if PDF generation fails
console.error('Error generating PDF:', error);
}
}

function submitForm() {
const scriptURL = 'https://script.google.com/macros/s/AKfycbxDOGVxgdlweyLVyC8CEnXP2R_tlmgvDiOo9Y5PPWnoodKXHjUpLYpiqfCP9SpcoXbYvw/exec';
const form = document.forms['submit-to-google-sheet2'];

fetch(scriptURL, {
method: 'POST',
body: new FormData(form)
})
.then(response => console.log('Success!', response))
.catch(error => console.error('Error!', error.message));
}






// Rest of your JavaScript code



function showDriverDetails(driver) {
// ... (existing code)

// Display Yathracab ID
document.getElementById("driverId").value = driver.id;

// ... (existing code)
}



// default date

function setDefaultDate() {
const currentDate = new Date().toISOString().split('T')[0];
document.getElementById('selectedDate').value = currentDate;
}


// Call the function when the page loads
window.onload = setDefaultDate;





//  login scripts
document.addEventListener('DOMContentLoaded', function () {
const inputs = document.querySelectorAll('.input-container input');

inputs.forEach(input => {
input.addEventListener('input', function () {
const label = this.nextElementSibling;

if (this.value.trim() !== '') {
label.classList.add('hidden');
} else {
label.classList.remove('hidden');
}
});
});
});


   
        document.addEventListener('keydown', function (event) {
            if (event.key === 'PrintScreen' || (event.key === 'c' && event.ctrlKey)) {
                alert('Screenshot functionality is disabled.');
                event.preventDefault();
            }
        });

        document.addEventListener('contextmenu', function (event) {
            alert('Right-click functionality is disabled.');
            event.preventDefault();
       });



//bookcab scripts 





function showRegistrationForm() {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('registration-form').style.display = 'block';
    }
    
    
    
    
const scriptURL = 'https://script.google.com/macros/s/AKfycbweRj_MKJW3uFMp-LU0dsXp_k7YuPF_pGKw7jCjm9XDdArPn4QSqQ2ZvQ8S_CfB9eZl/exec';

document.addEventListener('DOMContentLoaded', function () {
    const form = document.forms['submit-to-google-sheet'];

    form.addEventListener('submit', e => {
        e.preventDefault();
        fetch(scriptURL, { method: 'POST', body: new FormData(form) })
            .then(response => {
                console.log('Success!', response);
                // Display popup message
                document.getElementById('popup').style.display = 'block';
            })
            .catch(error => console.error('Error!', error.message));
    });
});




    </script>
</body>
</html>